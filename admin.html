<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>–ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å ‚Äî –•–≤–∏–ª—ñ –î–æ–±—Ä–∞</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: #e0f2ff;
            color: #333;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            text-align: center;
            padding: 20px;
        }
        
        h1 {
            color: #1565c0;
            margin-bottom: 20px;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }
        
        th,
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
            text-align: left;
        }
        
        th {
            background: #2196f3;
            color: white;
        }
        
        tr:hover {
            background-color: #f1f9ff;
        }
        
        .btn {
            cursor: pointer;
            padding: 6px 12px;
            border-radius: 6px;
            border: none;
            font-weight: bold;
            transition: background-color 0.2s;
            color: white;
        }
        
        .btn-message {
            background-color: #2196f3;
        }
        
        .btn-message:hover {
            background-color: #1565c0;
        }
        
        .btn-block {
            background-color: #f44336;
        }
        
        .btn-block:hover {
            background-color: #b71c1c;
        }
        
        .blocked-list {
            margin: 30px auto 0;
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 900px;
            text-align: left;
        }
        
        .blocked-list h2 {
            margin-top: 0;
            color: #f44336;
            text-align: center;
        }
        
        .no-data {
            font-style: italic;
            color: #777;
            text-align: center;
        }
        
        .main-header {
            background: #2196f3;
            color: white;
            padding: 10px 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin: 0;
            width: 100%;
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            font-size: 20px;
            font-weight: bold;
        }
        
        .header-nav {
            display: flex;
            gap: 10px;
        }
        
        .header-btn {
            background: white;
            color: #2196f3;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
            text-decoration: none;
        }
        
        .header-btn:hover {
            background: #e3f2fd;
            color: #1565c0;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
        }
        
        .negative-feedback {
            background-color: #ffebee;
        }
        
        .feedback-text {
            max-width: 300px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .feedback-text.expanded {
            white-space: normal;
            overflow: visible;
            text-overflow: clip;
        }
        
        .expand-feedback {
            color: #2196f3;
            cursor: pointer;
            text-decoration: underline;
            font-size: 12px;
        }
        
        .timestamp {
            font-size: 12px;
            color: #666;
        }
    </style>
</head>

<body>
    <header class="main-header">
        <div class="header-container">
            <div class="logo">üåä –•–≤–∏–ª—ñ –î–æ–±—Ä–∞</div>
            <nav class="header-nav">
                <a class="header-btn" href="index.html">–ö–∞—Ä—Ç–∞</a>
                <a class="header-btn" href="profile.html">–ø—Ä–æ—Ñ—ñ–ª—å</a>
            </nav>
        </div>
    </header>
    <main>
        <div class="container">
            <h1>–ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å: –Ω–µ–≥–∞—Ç–∏–≤–Ω—ñ –≤—ñ–¥–≥—É–∫–∏</h1>

            <table id="feedbackTable">
                <thead>
                    <tr>
                        <th>ID –≤—ñ–¥–≥—É–∫—É</th>
                        <th>–•—Ç–æ –∑–∞–ª–∏—à–∏–≤</th>
                        <th>–ù–∞ –∫–æ–≥–æ</th>
                        <th>–î–∞—Ç–∞</th>
                        <th>–¢–µ–∫—Å—Ç –≤—ñ–¥–≥—É–∫—É</th>
                        <th>–î—ñ—ó</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- –¢—É—Ç –±—É–¥—É—Ç—å —Ä—è–¥–∫–∏ -->
                </tbody>
            </table>

            <div class="blocked-list" id="blockedList">
                <h2>–ó–∞–±–ª–æ–∫–æ–≤–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</h2>
                <ul id="blockedUsersUl">
                    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏—Ö -->
                </ul>
                <div id="noBlocked" class="no-data">–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</div>
            </div>
        </div>
    </main>
    <script>
        // Mock database - in a real app you would fetch this from a server
        const feedbackDatabase = [{
            id: "1",
            fromUserId: "2106431200",
            fromUserName: "–Ü–≤–∞–Ω –ü–µ—Ç—Ä–µ–Ω–∫–æ",
            fromUserLink: "https://t.me/ivan_petrenko",
            toUserId: "7148034659",
            toUserName: "–î–º–∏—Ç—Ä–æ –°–∞–Ω—Ç–µ—Ö–Ω—ñ–∫",
            toUserLink: "https://t.me/dmitry_santehnik",
            timestamp: "2023-05-15 14:30",
            text: "–¶–µ–π —Å–∞–Ω—Ç–µ—Ö–Ω—ñ–∫ –Ω—ñ—á–æ–≥–æ –Ω–µ –≤–º—ñ—î, —Ç—ñ–ª—å–∫–∏ —á–∞—Å –º–∞—Ä–Ω—É–≤–∞–≤. –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é! –ü—Ä–∏–π—à–æ–≤, –ø–æ–¥–∏–≤–∏–≤—Å—è, —Å–∫–∞–∑–∞–≤ —â–æ –Ω–µ –π–æ–≥–æ –ø—Ä–æ—Ñ—ñ–ª—å —ñ –ø—ñ—à–æ–≤."
        }, {
            id: "2",
            fromUserId: "999888777",
            fromUserName: "–û–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –ö–æ–≤–∞–ª—å",
            fromUserLink: "https://t.me/olexandra_koval",
            toUserId: "2106431200",
            toUserName: "–†–æ–º–∞–Ω –ë—É—Ö–≥–∞–ª—Ç–µ—Ä",
            toUserLink: "https://t.me/roman_accountant",
            timestamp: "2023-05-16 09:15",
            text: "–û–±—ñ—Ü—è–≤ –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑ –ø–æ–¥–∞—Ç–∫–∞–º–∏, –∞–ª–µ —Ç–∞–∫ —ñ –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–≤ –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è. –î—É–∂–µ –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ."
        }, {
            id: "3",
            fromUserId: "555666777",
            fromUserName: "–ú–∞—Ä—ñ—è –°–∏–¥–æ—Ä–µ–Ω–∫–æ",
            fromUserLink: "https://t.me/maria_sydorenko",
            toUserId: "999888777",
            toUserName: "–ê–Ω–¥—Ä—ñ–π –ú–µ–Ω–µ–¥–∂–µ—Ä",
            toUserLink: "https://t.me/andriy_manager",
            timestamp: "2023-05-17 18:45",
            text: "–î—É–∂–µ –≥—Ä—É–±–æ –ø–æ–≤–æ–¥–∏–≤—Å—è, –Ω–µ –≤–º—ñ—î —Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è –∑ –∫–ª—ñ—î–Ω—Ç–∞–º–∏. –¢–µ—Ö–Ω—ñ—á–Ω—É –ø—Ä–æ–±–ª–µ–º—É —Ç–∞–∫ —ñ –Ω–µ –≤–∏—Ä—ñ—à–∏–≤."
        }];

        const userDatabase = {
            "2106431200": {
                "name": "–Ü–≤–∞–Ω –ü–µ—Ç—Ä–µ–Ω–∫–æ",
                "referal": "https://t.me/ivan_petrenko"
            },
            "7148034659": {
                "name": "–î–º–∏—Ç—Ä–æ –°–∞–Ω—Ç–µ—Ö–Ω—ñ–∫",
                "referal": "https://t.me/dmitry_santehnik"
            },
            "999888777": {
                "name": "–ê–Ω–¥—Ä—ñ–π –ú–µ–Ω–µ–¥–∂–µ—Ä",
                "referal": "https://t.me/andriy_manager"
            },
            "555666777": {
                "name": "–ú–∞—Ä—ñ—è –°–∏–¥–æ—Ä–µ–Ω–∫–æ",
                "referal": "https://t.me/maria_sydorenko"
            }
        };

        let blockedUsers = JSON.parse(localStorage.getItem('blockedUsers') || '{}');

        const feedbackTableBody = document.querySelector('#feedbackTable tbody');
        const blockedUsersUl = document.getElementById('blockedUsersUl');
        const noBlockedDiv = document.getElementById('noBlocked');

        function renderFeedback() {
            feedbackTableBody.innerHTML = '';

            if (feedbackDatabase.length === 0) {
                const tr = document.createElement('tr');
                const td = document.createElement('td');
                td.colSpan = 6;
                td.className = 'no-data';
                td.textContent = '–ù–µ–º–∞—î –Ω–µ–≥–∞—Ç–∏–≤–Ω–∏—Ö –≤—ñ–¥–≥—É–∫—ñ–≤.';
                tr.appendChild(td);
                feedbackTableBody.appendChild(tr);
                return;
            }

            feedbackDatabase.forEach(feedback => {
                const tr = document.createElement('tr');
                tr.className = 'negative-feedback';

                // Create feedback text element with expand functionality
                const feedbackTextDiv = document.createElement('div');
                feedbackTextDiv.className = 'feedback-text';
                feedbackTextDiv.textContent = feedback.text;

                const expandLink = document.createElement('span');
                expandLink.className = 'expand-feedback';
                expandLink.textContent = '—Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏';
                expandLink.onclick = (e) => {
                    e.preventDefault();
                    feedbackTextDiv.classList.toggle('expanded');
                    expandLink.textContent = feedbackTextDiv.classList.contains('expanded') ?
                        '–∑–≥–æ—Ä–Ω—É—Ç–∏' : '—Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏';
                };

                const feedbackContainer = document.createElement('div');
                feedbackContainer.appendChild(feedbackTextDiv);
                feedbackContainer.appendChild(document.createElement('br'));
                feedbackContainer.appendChild(expandLink);

                tr.innerHTML = `
                    <td>${feedback.id}</td>
                    <td>
                        <a href="${feedback.fromUserLink}" target="_blank">${feedback.fromUserName}</a>
                        <div class="timestamp">ID: ${feedback.fromUserId}</div>
                    </td>
                    <td>
                        <a href="${feedback.toUserLink}" target="_blank">${feedback.toUserName}</a>
                        <div class="timestamp">ID: ${feedback.toUserId}</div>
                    </td>
                    <td>${feedback.timestamp}</td>
                    <td></td>
                    <td>
                        <button class="btn btn-message" data-userlink="${feedback.fromUserLink}">–ù–∞–ø–∏—Å–∞—Ç–∏</button>
                        <button class="btn btn-block" data-userid="${feedback.fromUserId}" data-username="${feedback.fromUserName}">–ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏</button>
                    </td>
                `;

                // Insert feedback container into the TD
                const feedbackTd = tr.querySelector('td:nth-child(5)');
                feedbackTd.appendChild(feedbackContainer);

                feedbackTableBody.appendChild(tr);
            });

            document.querySelectorAll('.btn-message').forEach(btn => {
                btn.onclick = () => {
                    const userLink = btn.dataset.userlink;
                    window.open(userLink, '_blank');
                };
            });

            document.querySelectorAll('.btn-block').forEach(btn => {
                btn.onclick = () => {
                    const userId = btn.dataset.userid;
                    const userName = btn.dataset.username;
                    blockUser(userId, userName);
                };
            });
        }

        function renderBlockedUsers() {
            blockedUsersUl.innerHTML = '';
            const blockedUsersList = Object.keys(blockedUsers);

            if (blockedUsersList.length === 0) {
                noBlockedDiv.style.display = 'block';
                return;
            }
            noBlockedDiv.style.display = 'none';

            blockedUsersList.forEach(userId => {
                const user = userDatabase[userId] || {
                    name: "–ù–µ–≤—ñ–¥–æ–º–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á"
                };
                const li = document.createElement('li');
                li.innerHTML = `
                    ${user.name} (ID: ${userId})
                    <span class="timestamp">–∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ ${blockedUsers[userId].date || ''}</span>
                `;
                blockedUsersUl.appendChild(li);
            });
        }

        function blockUser(userId, userName) {
            if (blockedUsers[userId]) {
                alert('–¶–µ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∂–µ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π.');
                return;
            }

            if (confirm(`–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –∑–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ${userName} (ID: ${userId})? –¶—è –¥—ñ—è –Ω–µ–∑–≤–æ—Ä–æ—Ç–Ω—è.`)) {
                blockedUsers[userId] = {
                    name: userName,
                    date: new Date().toLocaleString('uk-UA')
                };
                localStorage.setItem('blockedUsers', JSON.stringify(blockedUsers));
                renderFeedback();
                renderBlockedUsers();
                alert('–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ. –í—ñ–Ω –±—ñ–ª—å—à–µ –Ω–µ –∑–º–æ–∂–µ —Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è –≤ —Å–∏—Å—Ç–µ–º—ñ.');
            }
        }

        // Initialize the page
        renderFeedback();
        renderBlockedUsers();
    </script>
</body>

</html>
